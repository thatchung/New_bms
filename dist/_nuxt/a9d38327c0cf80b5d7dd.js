(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{589:function(e,t,r){"use strict";r(79),r(121),r(19),r(16),r(32),r(67),r(397),r(53);var n=r(0),o=r.n(n);t.a={filters:{formatTypeMoney:function(e){var t=e+"";return e&&t.length>0?t.replace(/\B(?=(\d{3})+(?!\d))/g,","):0},ageFilter:function(e){var t=Date.now()-e;if(t<0)return 0;var r=new Date(t);return Math.abs(r.getUTCFullYear()-1970)},dateFilter:function(e){return o()(e).format("DD/MM/YYYY")},dateTimeFilter:function(e){return o()(e).format("HH:mm:ss DD/MM/YYYY")},timeFilter:function(e){return o()(e).format("HH:mm")},dateTimeFilterComment:function(e){return o()(e).format("DD/MM/YYYY")+" lúc "+o()(e).format("HH:mm")},simpleStateFilter:function(e){var t="";switch(e){case"active":t="Active";break;case"inactive":t="Inactive"}return t},showStateFilter:function(e){var t="";switch(e){case"show":t="Hiển thị";break;case"hide":t="Ẩn"}return t},editorStateFilter:function(e){var t="";switch(e){case"draft":t="Bản nháp";break;case"submit":t="Mới";break;case"lock":t="Đã khóa";break;case"inactive":t="Đã block"}return t},confirmStateFilter:function(e){var t="";switch(e){case"not_yet":t="Chưa xong";break;case"new":t="Mới";break;case"confirm":t="Đã duyệt";break;case"reject":t="Từ chối";break;case"inactive":t="Đã block"}return t},reportReviewState:function(e){return{new:"Mới",in_progress:"Đã tiếp nhận",reject:"Đã từ chối",done:"Đã xử lý"}[e]},articleConfirmStateFilter:function(e){return{new:"Mới",confirm:"Duyệt",reject:"Từ chối"}[e]},typePostFilter:function(e){return{review:"App",news:"News",article:"Web",video:"Video"}[e]},removeCharTo70:function(e){var t=e;return e.length>70&&(t=e.substring(0,70)+"..."),t}},methods:{replaceImageByDefault:function(e){var img=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.target.src=""!==img?img:"/images/no-image.png"},getListObjectDistinct:function(e){var t=e.array,r=e.commitArray,n=[];if(t&&t.length&&r&&r.length){var o=function(i){-1==r.findIndex((function(e){return e.uuid==t[i].uuid}))&&n.push(t[i])};for(var i in t)o(i);return n}return t},getListOrderBy:function(e){return e.array.sort((function(a,b){return Number(a.order)-Number(b.order)}))},isExistObject:function(e){var t=e.uuid;return e.array.findIndex((function(e){return e.uuid==t}))>-1},filterFieldNull:function(e){for(var form=e.form,object={},t=0,r=Object.keys(form);t<r.length;t++){var i=r[t],n=form[i];null!=n&&(object[i]=form[i])}return object},warningError:function(e){var t=e.message;this.$Notification({type:"error",title:"Lỗi",dangerouslyUseHTMLString:!0,message:t})},warningSuccess:function(e){var t=e.message;this.$Notification({type:"success",title:"Thành Công",dangerouslyUseHTMLString:!0,message:t})},getlinkimageresize:function(image,e){return image.includes("https://cdn01.diadiemanuong.com/ddau/")&&(image=(image=image.replace("999x",e)).replace("640x",e)),image}}}},592:function(e,t,r){var content=r(600);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(10).default)("3ce36daa",content,!0,{sourceMap:!1})},599:function(e,t,r){"use strict";var n=r(592);r.n(n).a},600:function(e,t,r){(t=r(9)(!1)).push([e.i,'.row[data-v-4ef54152]{width:100%}.div-list-role[data-v-4ef54152]{width:200px;margin:10px;border:1px solid #b1b1b1}.div-list-role .role-item[data-v-4ef54152]{padding:7px;height:40px;line-height:26px;border-bottom:1px solid #b1b1b1}.div-list-role .role-item .name-role[data-v-4ef54152]{display:inline-block;font-size:14px;cursor:pointer;font-weight:600}.div-list-role .role-item .btn-role[data-v-4ef54152]{float:right}.div-list-role .selected-item[data-v-4ef54152]{background-color:#007feb}.table-permission[data-v-4ef54152]{width:calc(100% - 250px);margin:10px;border:1px solid #b1b1b1;border-radius:10px;border-collapse:separate}.table-permission td[data-v-4ef54152]{padding-left:10px}.table-detail[data-v-4ef54152]{width:calc(100% - 250px);border:1px solid #b1b1b1;border-radius:10px;border-collapse:separate;margin:10px 30px 10px 10px;float:right;overflow:hidden}.table-detail thead tr[data-v-4ef54152]{height:36px;padding:5px;background-color:#e2e2e2}.table-detail thead tr th[data-v-4ef54152]{padding:5px}.table-detail td[data-v-4ef54152]{padding:8px}.checkbox-container[data-v-4ef54152]{margin-top:-12px;display:block;position:relative;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox-container input[data-v-4ef54152]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark-box[data-v-4ef54152]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#eee;border:1px solid #2196f3}.checkbox-container:hover input~.checkmark-box[data-v-4ef54152]{background-color:#ccc}.checkbox-container input:checked~.checkmark-box[data-v-4ef54152]{background-color:#2196f3}.checkmark-box[data-v-4ef54152]:after{content:"";position:absolute;left:9px;top:5px;width:5px;height:10px;border:solid #2196f3;border-width:0 3px 3px 0;transform:rotate(45deg)}.checkbox-container input:checked~.checkmark-box[data-v-4ef54152]:after{border:solid #fff;border-width:0 3px 3px 0;transform:rotate(45deg)}',""]),e.exports=t},604:function(e,t,r){"use strict";r.r(t);r(66),r(25),r(19),r(16),r(32),r(28),r(398),r(6);var n=r(1),o=r(29),c=r(589),l=r(33),d=r(30);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={layout:"app",computed:f({},Object(l.c)({list_role:"permission/getListRole"})),mixins:[c.a,{data:function(){return{}},methods:{get_excerpt:function(e,t){return null==e?null:e.length>t?e.substr(0,t)+"...":e}}}],data:function(){return{loading:!1,listFixRole:[],listRolePermissions:[],params:{name:{value:null},page:{value:1},page_size:{value:10}},showadd:!1,showedit:!1,role_item:{id:null,name:null,fix_role:null},current_role_id:null}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in r={},e.params)r[n]=e.params[n].value=void 0!==e.$route.query[n]?e.$route.query[n]:e.params[n].value?void 0!==e.params[n].value.uuid?e.params[n].value.uuid:e.params[n].value:null;if(0!=e.list_role.items.length){t.next=7;break}return t.next=5,e.loadData(r);case 5:t.next=8;break;case 7:e.$setParamsUrl(r);case 8:return e.list_role.items.length>0&&(e.current_role_id=e.list_role.items[0].id,e.loadListRolePermissions(e.current_role_id)),t.next=11,e.getListFixRole();case 11:e.listFixRole=t.sent,e.listFixRole.length>0&&(e.role_item.fix_role=e.listFixRole[0]);case 13:case"end":return t.stop()}}),t)})))()},methods:f({},Object(l.b)({getListRole:"permission/getListRole",getListRolePermissions:"permission/getListPermissionsOfRole",getListFixRole:"permission/getListFixRole",addRole:"permission/addRole",updateRole:"permission/updateRole",deleteRole:"permission/deleteRole",addPermissionToRole:"permission/addPermissionToRole",deletePermissionOfRole:"permission/deletePermissionOfRole",updateRoleDetials:"permission/updateRoleDetials"}),{getValueDetails:function(e,t){var r=e.find((function(element){return element.name==t}));return r?r.value:0},submitForm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(n.a)(regeneratorRuntime.mark((function r(){var data,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(n in e.loading=!0,data={},e.params)data[n]=e.params[n].value?void 0!==e.params[n].value.uuid?e.params[n].value.uuid:e.params[n].value:null;t&&(e.params.page.value=data.page=t),e.loadData(data);case 5:case"end":return r.stop()}}),r)})))()},loadListRolePermissions:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.current_role_id=e,r.next=3,t.getListRolePermissions({role_id:e});case 3:t.listRolePermissions=r.sent;case 4:case"end":return r.stop()}}),r)})))()},loadData:function(data){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$setParamsUrl(data),t.next=3,e.getListRole(data);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},loadPermission:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.loadListRolePermissions(e);case 1:case"end":return r.stop()}}),r)})))()},showAddRole:function(){this.showadd=!0},addRoleItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.showConfirm(e);case 2:return r=e.role_item.fix_role.id,t.next=5,e.addRole({params:{fix_role_id:r,name:e.role_item.name},callback:{success:function(t){e.$Notification({type:"success",title:"Thành công",message:"Thêm extent role thành công"}),e.submitForm()},error:function(t){e.$Notification({type:"error",title:"Thất bại",message:"Thêm extent role thất bại"})}}});case 5:case"end":return t.stop()}}),t)})))()},updateRoleItem:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.showConfirm(e);case 2:return r=e.role_item.fix_role.id,t.next=5,e.updateRole({params:{id:e.role_item.id,fix_role_id:r,name:e.role_item.name},callback:{success:function(t){e.$Notification({type:"success",title:"Thành công",message:"Cập nhật extent role thành công"}),e.submitForm()},error:function(t){e.$Notification({type:"error",title:"Thất bại",message:"Cập nhật extent role thất bại"})}}});case 5:case"end":return t.stop()}}),t)})))()},deleteRole:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.showConfirm(t);case 2:return r.next=4,t.addRole({params:{id:e},callback:{success:function(e){t.$Notification({type:"success",title:"Thành công",message:"Xóa extent role thành công"}),t.submitForm()},error:function(e){t.$Notification({type:"error",title:"Thất bại",message:"Xóa extent role thất bại"})}}});case 4:case"end":return r.stop()}}),r)})))()},changeStatePermission:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.has_add=0==e.has_add,!e.has_add){r.next=6;break}return r.next=4,t.addPermissionToRole({params:{role_id:t.current_role_id,permission_id:e.id},callback:{success:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$Notification({type:"success",title:"Thành công",message:"Thêm quyền thành công"}),e.next=3,t.getListRolePermissions({role_id:t.current_role_id});case 3:t.listRolePermissions=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$Notification({type:"error",title:"Thất bại",message:"Thêm quyền thất bại"}),e.next=3,t.getListRolePermissions({role_id:t.current_role_id});case 3:t.listRolePermissions=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}});case 4:r.next=8;break;case 6:return r.next=8,t.deletePermissionOfRole({params:{role_id:t.current_role_id,permission_id:e.id},callback:{success:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$Notification({type:"success",title:"Thành công",message:"Xóa quyền thành công"}),e.next=3,t.getListRolePermissions({role_id:t.current_role_id});case 3:t.listRolePermissions=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$Notification({type:"error",title:"Thất bại",message:"Xóa quyền thất bại"}),e.next=3,t.getListRolePermissions({role_id:t.current_role_id});case 3:t.listRolePermissions=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}});case 8:case"end":return r.stop()}}),r)})))()},updateDetails:function(e,t,r){var o=this;return Object(n.a)(regeneratorRuntime.mark((function c(){var l,d;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=o.getValueDetails(r,e),d=0==l?1:0,c.next=4,o.updateRoleDetials({params:{role_id:o.current_role_id,permission_id:t,name:e,value:d},callback:{success:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.$Notification({type:"success",title:"Thành công",message:(0==l?"Thêm":"Xóa")+" quyền "+e+" thành công"}),t.next=3,o.getListRolePermissions({role_id:o.current_role_id});case 3:o.listRolePermissions=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),error:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.$Notification({type:"error",title:"Thất bại",message:(0==l?"Thêm":"Xóa")+" quyền "+e+" thất bại"}),t.next=3,o.getListRolePermissions({role_id:o.current_role_id});case 3:o.listRolePermissions=t.sent;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}});case 4:case"end":return c.stop()}}),c)})))()}})},v=(r(599),r(3)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("data-form",{attrs:{title:"Danh sách extent role"}},[r("div",{staticStyle:{display:"inline-block",float:"left"}},[r("button",{staticClass:"btn-add-time btn btn-primary btn-sm",on:{click:function(t){return e.showAddRole()}}},[e._v("Thêm extent role")]),e._v(" "),r("div",{staticClass:"div-list-role"},e._l(e.list_role.items,(function(t,n){return r("div",{key:n,class:"role-item "+(e.current_role_id==t.id?"selected-item":"")},[r("div",{staticClass:"name-role",on:{click:function(r){return e.loadPermission(t.id)}}},[e._v(e._s(t.name))]),e._v(" "),r("div",{staticClass:"btn-role"},[r("dropdown",[r("li",[r("a",{on:{click:function(r){return e.deleteRole(t.id)}}},[e._v("Xóa")])])])],1)])})),0)]),e._v(" "),r("div",[r("h5",[e._v("Module Access")]),e._v(" "),r("div",{staticClass:"div-list-permission"},[r("table",{staticClass:"table-permission"},[r("tbody",e._l(e.listRolePermissions,(function(t,n){return r("tr",{key:n},[r("td",[e._v("\n                "+e._s(t.name)+"\n              ")]),e._v(" "),r("td",[e._v("\n                "+e._s(t.title)+"\n              ")]),e._v(" "),r("td",[r("checkbox-switch",{attrs:{checked:t.has_add,model:t.has_add},on:{click:function(r){return e.changeStatePermission(t)}}})],1)])})),0)]),e._v(" "),r("table",{staticClass:"table-detail"},[r("thead",[r("tr",[r("th",{attrs:{"data-priority":"1"}},[e._v("Module Permission")]),e._v(" "),r("th",{attrs:{"data-priority":"1"}},[e._v("Create")]),e._v(" "),r("th",{attrs:{"data-priority":"1"}},[e._v("Read")]),e._v(" "),r("th",{attrs:{"data-priority":"1"}},[e._v("Update")]),e._v(" "),r("th",{attrs:{"data-priority":"1"}},[e._v("Delete")]),e._v(" "),r("th",{attrs:{"data-priority":"1"}},[e._v("Hành động")])])]),e._v(" "),r("tbody",e._l(e.listRolePermissions,(function(t,n){return r("tr",{key:n},[r("td",[e._v("\n                "+e._s(t.name)+"\n              ")]),e._v(" "),r("td",[r("label",{staticClass:"checkbox-container"},[r("input",{attrs:{type:"checkbox"},domProps:{checked:1==e.getValueDetails(t.list_details,"create")?"checked":""},on:{click:function(r){return e.updateDetails("create",t.id,t.list_details)}}}),e._v(" "),r("span",{staticClass:"checkmark-box"})])]),e._v(" "),r("td",[r("label",{staticClass:"checkbox-container"},[r("input",{attrs:{type:"checkbox"},domProps:{checked:1==e.getValueDetails(t.list_details,"read")?"checked":""},on:{click:function(r){return e.updateDetails("read",t.id,t.list_details)}}}),e._v(" "),r("span",{staticClass:"checkmark-box"})])]),e._v(" "),r("td",[r("label",{staticClass:"checkbox-container"},[r("input",{attrs:{type:"checkbox"},domProps:{checked:1==e.getValueDetails(t.list_details,"update")?"checked":""},on:{click:function(r){return e.updateDetails("update",t.id,t.list_details)}}}),e._v(" "),r("span",{staticClass:"checkmark-box"})])]),e._v(" "),r("td",[r("label",{staticClass:"checkbox-container"},[r("input",{attrs:{type:"checkbox"},domProps:{checked:1==e.getValueDetails(t.list_details,"delete")?"checked":""},on:{click:function(r){return e.updateDetails("delete",t.id,t.list_details)}}}),e._v(" "),r("span",{staticClass:"checkmark-box"})])]),e._v(" "),r("td",[e._v("\n                ...\n              ")])])})),0)])])]),e._v(" "),r("model",{attrs:{modelwidth:"50%","is-open":e.showadd,title:"Thêm Extend Role"},on:{"update:isOpen":function(t){e.showadd=t},"update:is-open":function(t){e.showadd=t}},scopedSlots:e._u([{key:"body",fn:function(){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12 m-b-10"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"col-md-4"},[r("label",{staticClass:"control-label"},[e._v("Tên Role")])]),e._v(" "),r("div",{staticClass:"col-md-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.role_item.name,expression:"role_item.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.role_item.name},on:{input:function(t){t.target.composing||e.$set(e.role_item,"name",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"col-md-12 m-b-10"},[r("div",{staticClass:"form-group"},[r("div",{staticClass:"col-md-4"},[r("label",{staticClass:"control-label"},[e._v("Fix Role")])]),e._v(" "),r("div",{staticClass:"col-md-8"},[r("el-select",{model:{value:e.role_item.fix_role,callback:function(t){e.$set(e.role_item,"fix_role",t)},expression:"role_item.fix_role"}},e._l(e.listFixRole,(function(e){return r("el-option",{key:e.id,attrs:{value:e,label:e.name}})})),1)],1)])]),e._v(" "),r("div",{staticClass:"col-sm-12"},[r("div",{staticClass:"col-xs-12"},[r("button",{staticClass:"pull-right btn btn-danger m-b-8",attrs:{type:"button",disabled:e.loading},on:{click:function(t){return e.addRoleItem()}}},[e._v("\n                    Cập nhật\n                  ")])])])])]},proxy:!0}])}),e._v(" "),r("model",{attrs:{modelwidth:"50%","is-open":e.showedit,title:"Chỉnh sửa Extend Role"},on:{"update:isOpen":function(t){e.showedit=t},"update:is-open":function(t){e.showedit=t}},scopedSlots:e._u([{key:"body",fn:function(){return[e.current_uuid?r("edit-info",{attrs:{object_uuid:e.current_uuid}}):e._e()]},proxy:!0}])})],1)}),[],!1,null,"4ef54152",null);t.default=component.exports}}]);