let Joi = require('../../joi/_index');

module.exports = server =>
    server.registerMiddleware({
        key: 'prepare',
        summary: 'chuẩn bị tiến trình xử lý request',
        option: {
            meta_field: Joi.string()
                .default('meta')
                .description('trường dữ liệu meta'),
            data_field: Joi.string()
                .default('data')
                .description('trường dữ liệu data'),
            error_field: Joi.string()
                .default('error')
                .description('trường dữ liệu error')
        },
        handler: async function({ context, response }) {
            response.type = 'application/json';
        }
    });
