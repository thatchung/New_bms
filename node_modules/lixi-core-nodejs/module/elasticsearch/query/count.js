/** thực hiện truy vấn count */

module.exports = ({ elastic, query }) =>
    (query.count = async function() {
        return (
            await elastic.client.count({
                index: query._body.index,
                type: query._body.type,
                body: {
                    query: {
                        bool: {
                            must: query._body.filter_must || [],
                            should: query._body.filter_should || [],
                            must_not: query._body.filter_must_not || []
                        }
                    }
                }
            })
        ).body.count;
    });
