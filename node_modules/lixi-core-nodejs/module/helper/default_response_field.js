/** thiết lập các giá trị mặc định cho các trường của reponse */

function setDefault({ response, is_root = true }) {
    if (response._flags.hasOwnProperty('default')) return;

    if (is_root && response._type === 'object') {
        for (let field of response._inner.children) {
            setDefault({ response: field.schema, is_root: false });
        }
        return;
    }

    switch (response._type) {
        case 'array':
            response._flags.default = [];
            break;
        default:
            response._valids._hasRef = 0;
            response._valids._set.add(null);
            response._flags.default = null;
            break;
    }
}

module.exports = setDefault;
