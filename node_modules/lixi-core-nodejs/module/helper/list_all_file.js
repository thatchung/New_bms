/** lấy danh sách file từ dường dẫn chỉ định */

let Path = require('path');
let Fs = require('fs');

module.exports = function listAllFile({ dir, filelist, extnames }) {
    filelist = filelist || [];
    if (!Fs.existsSync(dir)) return filelist;

    let files = Fs.readdirSync(dir);
    for (let file of files) {
        let filename = Path.join(dir, file);

        if (Fs.statSync(Path.join(dir, file)).isDirectory()) {
            filelist = listAllFile({ dir: filename, filelist, extnames });
        } else {
            if (
                extnames &&
                extnames.length > 0 &&
                !extnames.includes(Path.extname(file))
            )
                continue;
            filelist.push(filename);
        }
    }

    return filelist;
};
