/** khởi tạo bộ kết nối
 * @param {object} options thông số cấu hình
 * @returns {Hub} client
 */

let Joi = require('../joi/_index');

// #region [schema]

let schema_option = Joi.object({});
schema_option = schema_option.default(schema_option.validate({}).value);

// #endregion

module.exports = expo =>
    (expo.init = function(options = {}) {
        let hub = {};

        // #region [ghi nhận option]

        hub.options = Joi.validateValue({ options }, schema_option);
        hub.endpoints = [];

        // #endregion

        // cài đặt các method cho đối tượng hub
        require('./instance/_index')(hub);

        return hub;
    });
