/** định dạng về lại số quốc gia
 * @param {string} phone số điện thoại theo chuẩn E164
 * @param {string} country mã quốc gia
 * @returns {string} số quốc gia
 */

let { PhoneNumberUtil } = require('google-libphonenumber');

module.exports = expo =>
    (expo.formatCountry = function({ phone, country }) {
        let phoneUtil = PhoneNumberUtil.getInstance();

        if (!country) country = this.getCountry({ phone });

        phone = phoneUtil.parseAndKeepRawInput(phone);
        phone = phoneUtil.formatOutOfCountryCallingNumber(phone, country);
        phone = phone.replace(/[ -()]/g, '');

        return phone;
    });
