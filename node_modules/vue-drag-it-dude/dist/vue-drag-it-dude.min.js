var DragItDude=function(e){"use strict";function t(){var e=document.head||document.getElementsByTagName("head")[0],n=t.styles||(t.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(t,s){if(!document.querySelector('style[data-vue-ssr-id~="'+t+'"]')){var h=i?s.media||"default":t,o=n[h]||(n[h]={ids:[],parts:[],element:void 0});if(!o.ids.includes(t)){var a=s.source,d=o.ids.length;if(o.ids.push(t),i&&(o.element=o.element||document.querySelector("style[data-group="+h+"]")),!o.element){var r=o.element=document.createElement("style");r.type="text/css",s.media&&r.setAttribute("media",s.media),i&&(r.setAttribute("data-group",h),r.setAttribute("data-next-index","0")),e.appendChild(r)}if(i&&(d=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",d+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var l=document.createTextNode(a),p=o.element.childNodes;p[d]&&o.element.removeChild(p[d]),p.length?o.element.insertBefore(l,p[d]):o.element.appendChild(l)}}}}}function n(e){n.installed||(n.installed=!0,e.component("DragItDude",o))}var i={name:"drag-it-dude",props:{width:{type:Number,default:0},height:{type:Number,default:0},parentWidth:{type:Number,default:0},parentHeight:{type:Number,default:0}},watch:{width:function(e,t){if(!(e<t)&&0!==this.left&&(this.parent.width=this.parentWidth||this.elem.parentNode.offsetWidth,this.parent.height=this.parentHeight||this.elem.parentNode.offsetHeight,e>this.parent.width-this.left)){var n=this.parent.width-e;this.left=n<0?0:n,this.elem.style.left=this.left+"px"}},height:function(e,t){if(!(e<t)&&0!==this.top&&(this.parent.width=this.parentWidth||this.elem.parentNode.offsetWidth,this.parent.height=this.parentHeight||this.elem.parentNode.offsetHeight,e>this.parent.height-this.top)){var n=this.parent.height-this.height;this.top=n,this.elem.style.top=this.top+"px"}}},data:function(){return{shiftY:null,shiftX:null,left:0,top:0,elem:null,isIos:!1,parent:{width:0,height:0}}},methods:{iosMove:function(e){this.isIos&&this.elementMove(e)},elementMove:function(e){this.$emit("dragging"),e.preventDefault(),e.pageX||(document.body.style.overflow="hidden");var t=e.pageX||e.changedTouches[0].pageX,n=e.pageY||e.changedTouches[0].pageY,i=t-this.shiftX,s=n-this.shiftY,h=t-this.shiftX+this.elem.offsetWidth,o=n-this.shiftY+this.elem.offsetHeight;i=i<0?0:h>this.parent.width?this.parent.width-this.elem.offsetWidth:t-this.shiftX,s=s<0?0:o>this.parent.height?this.parent.height-this.elem.offsetHeight:n-this.shiftY,this.elem.style.left=i+"px",this.left=i,this.elem.style.top=s+"px",this.top=s},hang:function(e){this.$emit("activated"),this.parent.width=this.parentWidth||this.elem.parentNode.offsetWidth,this.parent.height=this.parentHeight||this.elem.parentNode.offsetHeight,this.shiftX=e.pageX?e.pageX-this.elem.offsetLeft:e.changedTouches[0].pageX-this.elem.offsetLeft,this.shiftY=e.pageY?e.pageY-this.elem.offsetTop:e.changedTouches[0].pageY-this.elem.offsetTop,e.pageX?this.isIos?this.elem.addEventListener("touchmove",this.elementMove):(this.elem.addEventListener("mousemove",this.elementMove),this.elem.addEventListener("mouseleave",this.drop)):this.elem.addEventListener("touchmove",this.elementMove)},drop:function(){this.$emit("dropped"),document.body.style.overflow=null,this.elem.removeEventListener("mousemove",this.elementMove,!1),this.elem.removeEventListener("touchmove",this.elementMove,!1),this.elem.onmouseup=null,this.elem.ontouchend=null}},mounted:function(){this.isIos=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.elem=this.$el}},s=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"drag-it-dude",on:{touchstart:function(t){return t.stopPropagation(),e.hang(t)},touchend:function(t){return t.stopPropagation(),e.drop(t)},mousedown:function(t){return t.stopPropagation(),e.hang(t)},mouseup:function(t){return t.stopPropagation(),e.drop(t)},touchmove:function(t){return t.stopPropagation(),e.iosMove(t)}}},[e._t("default")],2)},h=[];s._withStripped=!0;var o=function(e,t,n,i,s,h,o,a){var d=("function"==typeof n?n.options:n)||{};d.__file="/Users/karambafe/job/libs/vue-drag-it-dude/src/DragItDude.vue",d.render||(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,s&&(d.functional=!0)),d._scopeId=i;var r;if(t&&(r=function(e){t.call(this,o(e))}),void 0!==r)if(d.functional){var l=d.render;d.render=function(e,t){return r.call(t),l(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,r):[r]}return d}({render:s,staticRenderFns:h},function(e){e&&e("data-v-47e484ae_0",{source:"\n.drag-it-dude {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n",map:{version:3,sources:["/Users/karambafe/job/libs/vue-drag-it-dude/src/DragItDude.vue"],names:[],mappings:";AAmJA;EACA,mBAAA;EACA,OAAA;EACA,QAAA;EACA,WAAA;CACA",file:"DragItDude.vue",sourcesContent:["<template>\n  <div\n    class=\"drag-it-dude\"\n    @touchstart.stop=\"hang\"\n    @touchend.stop=\"drop\"\n    @mousedown.stop=\"hang\"\n    @mouseup.stop=\"drop\"\n    @touchmove.stop=\"iosMove\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'drag-it-dude',\n    props: {\n      width: {\n        type: Number,\n        default: 0,\n      },\n      height: {\n        type: Number,\n        default: 0,\n      },\n      parentWidth: {\n        type: Number,\n        default: 0,\n      },\n      parentHeight: {\n        type: Number,\n        default: 0,\n      },\n    },\n    watch: {\n      width(newWidth, oldWidth) {\n        if (newWidth < oldWidth) return;\n        if (this.left === 0) return;\n\n        this.parent.width = this.parentWidth || this.elem.parentNode.offsetWidth;\n        this.parent.height = this.parentHeight || this.elem.parentNode.offsetHeight;\n\n        if (newWidth > this.parent.width - this.left) {\n          const newLeft = this.parent.width - newWidth;\n          this.left = newLeft < 0 ? 0 : newLeft;\n          this.elem.style.left = `${this.left}px`;\n        }\n      },\n      height(newHeight, oldHeight) {\n        if (newHeight < oldHeight) return;\n        if (this.top === 0) return;\n\n        this.parent.width = this.parentWidth || this.elem.parentNode.offsetWidth;\n        this.parent.height = this.parentHeight || this.elem.parentNode.offsetHeight;\n        \n        if (newHeight > this.parent.height - this.top) {\n          const newTop = this.parent.height - this.height;\n          this.top = newTop;\n          this.elem.style.top = `${this.top}px`;\n        }\n      },\n    },\n    data: () => ({\n      shiftY: null,\n      shiftX: null,\n      left: 0,\n      top: 0,\n      elem: null,\n      isIos: false,\n      parent: {\n        width: 0,\n        height: 0,\n      },\n    }),\n    methods: {\n      iosMove(e) {\n        if (this.isIos) this.elementMove(e);\n      },\n      elementMove(e) {\n        this.$emit('dragging');\n        e.preventDefault();\n        if (!e.pageX) {\n          document.body.style.overflow = 'hidden';\n        }\n        const x = e.pageX || e.changedTouches[0].pageX;\n        const y = e.pageY || e.changedTouches[0].pageY;\n        let newLeft = x - this.shiftX;\n        let newTop = y - this.shiftY;\n        const newRight = x - this.shiftX + this.elem.offsetWidth;\n        const newBottom = y - this.shiftY + this.elem.offsetHeight;\n        if (newLeft < 0) {\n          newLeft = 0;\n        } else if (newRight > this.parent.width) {\n          newLeft =  this.parent.width - this.elem.offsetWidth;\n        } else {\n          newLeft = x - this.shiftX;\n        }\n        if (newTop < 0) {\n          newTop = 0;\n        } else if (newBottom > this.parent.height) {\n          newTop = this.parent.height - this.elem.offsetHeight;\n        } else {\n          newTop = y - this.shiftY;\n        }\n        this.elem.style.left = `${newLeft}px`;\n        this.left = newLeft;\n        this.elem.style.top = `${newTop}px`;\n        this.top = newTop;\n      },\n      hang(e) {\n        this.$emit('activated');\n        this.parent.width = this.parentWidth || this.elem.parentNode.offsetWidth;\n        this.parent.height = this.parentHeight || this.elem.parentNode.offsetHeight;\n        this.shiftX = e.pageX\n          ? e.pageX - this.elem.offsetLeft\n          : e.changedTouches[0].pageX - this.elem.offsetLeft;\n        this.shiftY = e.pageY\n          ? e.pageY - this.elem.offsetTop\n          : e.changedTouches[0].pageY - this.elem.offsetTop;\n        if (e.pageX) {\n          if (this.isIos) {\n            this.elem.addEventListener('touchmove', this.elementMove);\n          } else {\n            this.elem.addEventListener('mousemove', this.elementMove);\n            this.elem.addEventListener('mouseleave', this.drop);\n          }\n        } else {\n          this.elem.addEventListener('touchmove', this.elementMove);\n        }\n      },\n      drop() {\n        this.$emit('dropped');\n        document.body.style.overflow = null;\n        this.elem.removeEventListener('mousemove', this.elementMove, false);\n        this.elem.removeEventListener('touchmove', this.elementMove, false);\n        this.elem.onmouseup = null;\n        this.elem.ontouchend = null;\n      },\n    },\n    mounted() {\n      this.isIos = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n      this.elem = this.$el;\n    },\n  };\n<\/script>\n\n<style>\n.drag-it-dude {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1;\n}\n</style>\n"]},media:void 0})},i,void 0,!1,void 0,t,void 0),a={install:n},d=null;return"undefined"!=typeof window?d=window.Vue:"undefined"!=typeof global&&(d=global.Vue),d&&d.use(a),e.default=o,e}({});
